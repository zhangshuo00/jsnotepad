var $menubar=function(){var d,c=$('<div class="notepad-menubar"></div>'),o=[],r=-1;function s(){!function(){for(var a=$('<ul class="menu-title"></ul>'),s=0;s<d.length;s++){var n=$('<li class="title"></li>');n.html(d[s].title),n.attr("data-id",s),a.append(n),n.click(function(a){var s=Number(this.dataset.id);r=-1===r?(o[s].css({display:"inline-block"}),s):r!==s?(o[r].css({display:"none"}),o[s].css({display:"inline-block"}),s):(o[r].css({display:"none"}),-1),a.stopPropagation()}),n.hover(function(){if(-1!==r){var a=Number(this.dataset.id);o[r].css({display:"none"}),o[a].css({display:"inline-block"}),r=a}})}c.append(a)}(),function(){for(var a=0;a<d.length;a++){for(var s=$('<ul class="menus"></ul>'),n=d[a].menuItems,t=0;t<n.length;t++)if("hr"!==n[t].title){var i=$('<li class="menu-item"></li>');if(i.html(n[t].title),i.attr("data-x",a),i.attr("data-y",t),""!==n[t].shortcut){var e=$('<span class="shortcut"></span>');e.html(n[t].shortcut),i.append(e)}n[t].enabled||i.addClass("disabled"),s.append(i),i.click(function(a){if(a.stopPropagation(),!$(this).hasClass("disabled")){var s=this.dataset.x,n=this.dataset.y;o[s].css({display:"none"}),r=-1,d[s].menuItems[n].handler()}})}else{var l=$('<li class="menu-hr"></li>');s.append(l)}s.css({width:d[a].width,left:d[a].left,display:"none"}),c.append(s),o.push(s)}}(),$("body").append(c)}return{show:function(a){d=a,s()},enabled:function(a,s,n){var t=o[a].find(".menu-item")[s];n?$(t).removeClass("disabled"):$(t).addClass("disabled")},hideMenu:function(){-1!==r&&(o[r].css({display:"none"}),r=-1)}}}();